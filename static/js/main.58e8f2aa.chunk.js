(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t,a){e.exports=a(147)},110:function(e,t,a){},111:function(e,t,a){},147:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),i=a.n(o),s=(a(110),a(111),a(42)),l=a(30),c=a(39),u=a(40),m=a(43),p=a(41),h=a(44),d=a(60),g=a(187),f=a(189),v=a(205),y=a(190),b=a(191),E=a(194),_=a(206),w=a(68),k=a(20),x=a.n(k),O=a(38),S=a(113),j=a(131),C="https://api.stya.net",N={register:function(e,t){return q.apply(this,arguments)},login:function(e,t){return I.apply(this,arguments)},by_id:function(e,t){return W.apply(this,arguments)},by_name:function(e,t){return T.apply(this,arguments)}};function q(){return(q=Object(O.a)(x.a.mark(function e(t,a){var n,r,o;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={username:t,password:a},e.next=3,M("".concat(C,"/nim/register"),n);case 3:if(r=e.sent,0===(o=r.data).code){e.next=7;break}throw o.status;case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(){return(I=Object(O.a)(x.a.mark(function e(t,a){var n,r,o;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={username:t,password:a},e.next=3,M("".concat(C,"/nim/login"),n);case 3:if(r=e.sent,0===(o=r.data).code){e.next=9;break}throw o.status;case 9:return e.abrupt("return",o.token);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(){return(T=Object(O.a)(x.a.mark(function e(t,a){var n,r,o,i,s,l=arguments;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>2&&void 0!==l[2]?l[2]:0,r=l.length>3&&void 0!==l[3]?l[3]:10,o={name:a,page:n,count:r},e.next=5,L("".concat(C,"/nim/byname"),o,{"Auth-Token":t});case 5:if(i=e.sent,"OK"===(s=i.data).status){e.next=11;break}throw s.status;case 11:return e.abrupt("return",s.payload);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function W(){return(W=Object(O.a)(x.a.mark(function e(t,a){var n,r,o,i,s,l=arguments;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>2&&void 0!==l[2]?l[2]:0,r=l.length>3&&void 0!==l[3]?l[3]:10,o={query:a,page:n,count:r},e.next=5,L("".concat(C,"/nim/byid"),o,{"Auth-Token":t});case 5:if(i=e.sent,"OK"===(s=i.data).status){e.next=11;break}throw s.status;case 11:return e.abrupt("return",s.payload);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function M(e,t,a){return D.apply(this,arguments)}function D(){return(D=Object(O.a)(x.a.mark(function e(t,a,n){var r,o;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=j.stringify(a),o={headers:Object(w.a)({"Content-Type":"application/x-www-form-urlencoded"},n)},e.next=4,S.post(t,r,o);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(e,t,a){return P.apply(this,arguments)}function P(){return(P=Object(O.a)(x.a.mark(function e(t,a,n){var r,o;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=j.stringify(a),o={headers:Object(w.a)({"Content-Type":"application/x-www-form-urlencoded"},n)},console.log(o),e.next=5,S.get(t+"?"+r,o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var H=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={user_id:"",snackbar_open:!1,snackbar_text:"",username:"",password:""},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(g.a,{container:!0,direction:"row",alignItems:"center",justify:"center",style:{minHeight:"100vh",backgroundColor:"#c2185b"}},r.a.createElement(g.a,{item:!0,xs:12,align:"center"},r.a.createElement(f.a,{className:"login_card",style:{maxWidth:"400px"}},r.a.createElement(y.a,{align:"left",style:{padding:"32px"}},r.a.createElement(b.a,{variant:"h5"},"Sign in"),r.a.createElement("p",null,"Hi there, welcome to ",r.a.createElement("s",null,"Lamia")," NIM finder! Please login or register to continue."),r.a.createElement("form",{onSubmit:function(t){return e.login(t)}},r.a.createElement(v.a,{id:"outlined-name",label:"Username",className:"textfield",margin:"normal",variant:"outlined",fullWidth:!0,value:this.state.username,onChange:function(t){return e.update_value("username",t)}}),r.a.createElement(v.a,{id:"outlined-name",label:"Password",className:"textfield",margin:"normal",variant:"outlined",fullWidth:!0,type:"password",value:this.state.password,onChange:function(t){return e.update_value("password",t)}}),r.a.createElement(E.a,{variant:"outlined",color:"primary",style:{marginTop:"16px",width:"100%"},type:"submit"},"Sign in"),r.a.createElement("div",{style:{marginTop:"16px"}},"Or ",r.a.createElement(s.b,{to:"/register"},"register")," if you haven't")))))),r.a.createElement(_.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.snackbar_open,autoHideDuration:6e3,onClose:function(){return e.setState({snackbar_open:!1})},message:r.a.createElement("div",null,this.state.snackbar_text)}))}},{key:"login",value:function(e){var t=this;N.login(this.state.username,this.state.password).then(function(e){t.show_snackbar("Logged in!"),(new d.a).set("token",e,{path:"/"}),t.props.history.push("/")}).catch(function(e){console.log("Error: "+e.toString()),t.show_snackbar(e.toString())}),e.preventDefault()}},{key:"update_value",value:function(e,t){var a={};a[e]=t.target.value,this.setState(a)}},{key:"show_snackbar",value:function(e){this.setState({snackbar_open:!0,snackbar_text:e})}}]),t}(r.a.Component),z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={user_id:"",snackbar_open:!1,snackbar_text:"",username:"",password:""},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(g.a,{container:!0,direction:"row",alignItems:"center",justify:"center",style:{minHeight:"100vh",backgroundColor:"#c2185b"}},r.a.createElement(g.a,{item:!0,xs:12,align:"center"},r.a.createElement(f.a,{className:"login_card",style:{maxWidth:"400px"}},r.a.createElement(y.a,{align:"left",style:{padding:"32px"}},r.a.createElement(b.a,{variant:"h5"},"Register"),r.a.createElement("p",null,"Create an account to use ",r.a.createElement("s",null,"Lamia")," NIM finder"),r.a.createElement("form",{onSubmit:function(t){return e.submit_registration(t)}},r.a.createElement(v.a,{id:"outlined-name",label:"Username",className:"textfield",margin:"normal",variant:"outlined",value:this.state.username,onChange:function(t){return e.update_value("username",t)},fullWidth:!0}),r.a.createElement(v.a,{id:"outlined-name",label:"Password",className:"textfield",margin:"normal",variant:"outlined",fullWidth:!0,value:this.state.password,onChange:function(t){return e.update_value("password",t)},type:"password"}),r.a.createElement(E.a,{variant:"outlined",color:"primary",style:{marginTop:"16px",width:"100%"},type:"submit"},"Register"),r.a.createElement("div",{style:{marginTop:"16px"}},"Or ",r.a.createElement(s.b,{to:"/login"},"sign in")," if you have an account.")))))),r.a.createElement(_.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.snackbar_open,autoHideDuration:6e3,onClose:function(){return e.setState({snackbar_open:!1})},message:r.a.createElement("div",null,this.state.snackbar_text)}))}},{key:"submit_registration",value:function(e){var t=this;N.register(this.state.username,this.state.password).then(function(){console.log("User registered!"),t.show_snackbar("You're registered now!"),t.setState({username:"",password:""})}).catch(function(e){console.log("Error: "+e.toString()),t.show_snackbar(e.toString())}),e.preventDefault()}},{key:"update_value",value:function(e,t){var a={};a[e]=t.target.value,this.setState(a)}},{key:"show_snackbar",value:function(e){this.setState({snackbar_open:!0,snackbar_text:e})}}]),t}(r.a.Component),A=a(195),B=a(198),U=a(208),J=a(93),K=a.n(J),R=a(97),G=a(197),Y=a(209),$=a(96),F=a(92),Q=a.n(F),V=a(200),X=a(204),Z=a(203),ee=a(201),te=a(202),ae=a(196),ne=a(199),re=a(95),oe=a.n(re),ie=a(94),se=a.n(ie),le=new d.a,ce=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(m.a)(this,Object(p.a)(t).call(this,e))).state={find_by:"name",label_width:50,dropdown_open:!1,dropdown_anchor:null,dropdown_label:"Nama",page:0,records:[],query:"",active_query:"",loading:!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){le.get("token")||this.props.history.push("/login")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(A.a,{position:"static",style:{alignItems:"left"},elevation:0},r.a.createElement("div",{style:{padding:6}},r.a.createElement(ae.a,{style:{padding:0},maxWidth:"md"},r.a.createElement(g.a,{container:!0,alignItems:"center"},r.a.createElement(g.a,{item:!0},r.a.createElement("form",{onSubmit:function(t){return e.do_search(t)}},r.a.createElement(R.a,{style:{display:"flex",alignItems:"center",width:400,marginLeft:"24px"}},r.a.createElement("div",null,r.a.createElement(E.a,{"aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(t){return e.open_search_selector(t)},color:"inherit",style:{marginLeft:8}},this.state.dropdown_label,r.a.createElement(Q.a,null)),r.a.createElement($.a,{id:"menu-appbar",anchorEl:this.state.dropdown_anchor,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:this.state.dropdown_open,onClose:function(){return e.close_search_selector()}},r.a.createElement(Y.a,{onClick:function(){return e.pick_search_selector("name","Nama")}},"Nama"),r.a.createElement(Y.a,{onClick:function(){return e.pick_search_selector("nim","NIM")}},"NIM"))),r.a.createElement(G.a,{style:{width:1,height:28,margin:4}}),r.a.createElement(U.a,{placeholder:"Cari mahasiswa",inputProps:{"aria-label":"Search student"},style:{marginLeft:8,flex:1},value:this.state.query,onChange:function(t){return e.setState({query:t.target.value})}}),r.a.createElement(B.a,{"aria-label":"Search",type:"submit"},r.a.createElement(K.a,null)),r.a.createElement(G.a,null)))),r.a.createElement(g.a,{style:{flexGrow:1}}),r.a.createElement(g.a,{item:!0},r.a.createElement(E.a,{style:{color:"white"},onClick:function(){return e.logout()}},"Logout")))))),r.a.createElement(ae.a,{style:{padding:24},maxWidth:"md"},r.a.createElement(R.a,{style:{backgroundColor:"white"}},this.state.loading&&r.a.createElement(ne.a,null),!this.state.loading&&r.a.createElement("div",{style:{height:4}}),r.a.createElement(V.a,null,r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement(Z.a,null,"#"),r.a.createElement(Z.a,null,"Nama"),r.a.createElement(Z.a,null,"NIM TPB"),r.a.createElement(Z.a,null,"NIM"),r.a.createElement(Z.a,null,"Program Studi"))),r.a.createElement(X.a,null,this.state.records.map(function(t,a){return r.a.createElement(te.a,{key:t.nim_tpb},r.a.createElement(Z.a,{style:{color:"#aaaaaa"}},15*e.state.page+(a+1),"."),r.a.createElement(Z.a,{component:"th",scope:"row"},t.name),r.a.createElement(Z.a,null,t.nim_tpb),r.a.createElement(Z.a,null,t.nim_jur),r.a.createElement(Z.a,null,t.prodi))}))),r.a.createElement(B.a,{disabled:0===this.state.page,onClick:function(t){return e.prev_page(t)},color:"primary",component:"span"},r.a.createElement(se.a,null)),r.a.createElement("small",null,this.state.page+1),r.a.createElement(B.a,{disabled:this.state.records.length<15,onClick:function(t){return e.next_page(t)},color:"primary",component:"span"},r.a.createElement(oe.a,null)))))}},{key:"pick_search_selector",value:function(e,t){this.setState({find_by:e,dropdown_label:t}),this.close_search_selector()}},{key:"open_search_selector",value:function(e){this.setState({dropdown_anchor:e.currentTarget,dropdown_open:!0})}},{key:"close_search_selector",value:function(){this.setState({dropdown_anchor:null,dropdown_open:!1})}},{key:"do_search",value:function(e){e.preventDefault(),this.state.query&&this.load_results(0,this.state.query)}},{key:"load_results",value:function(e,t){var a=this,n=le.get("token");this.setState({loading:!0}),"name"===this.state.find_by?N.by_name(n,t,e,15).then(function(n){console.log(n),a.setState({records:n,loading:!1,page:e,active_query:t})}).catch(function(e){console.log(e),a.setState({loading:!1})}):N.by_id(n,t,e,15).then(function(n){console.log(n),a.setState({records:n,loading:!1,page:e,active_query:t})}).catch(function(e){console.log(e),a.setState({loading:!1})})}},{key:"next_page",value:function(e){if(e.preventDefault(),this.state.active_query){var t=this.state.page+1;this.load_results(t,this.state.active_query)}}},{key:"prev_page",value:function(e){if(e.preventDefault(),this.state.active_query){var t=Math.max(0,this.state.page-1);this.load_results(t,this.state.active_query)}}},{key:"logout",value:function(){le.set("token",""),this.props.history.push("/login")}}]),t}(r.a.Component);var ue=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(s.a,null,r.a.createElement(l.a,{exact:!0,path:"/login",component:H}),r.a.createElement(l.a,{exact:!0,path:"/register",component:z}),r.a.createElement(l.a,{exact:!0,path:"/",component:ce})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[105,1,2]]]);
//# sourceMappingURL=main.58e8f2aa.chunk.js.map